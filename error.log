{"error":"querySrv ENOTFOUND _mongodb._tcp.CLUSTER_NAME.mongodb.net","level":"error","message":"Erro ao conectar ao MongoDB:","stack":"Error: querySrv ENOTFOUND _mongodb._tcp.CLUSTER_NAME.mongodb.net\n    at QueryReqWrap.onresolve [as oncomplete] (node:internal/dns/promises:294:17)","timestamp":"2025-09-19T14:11:26.268Z"}
{"level":"error","message":"Erro ao registrar usuário: E11000 duplicate key error collection: ecommerce.users index: email_1 dup key: { email: \"joao@example.com\" }","payload":{"email":"joao@example.com","name":"João da Silva","password":"minhasenha123"},"stack":"MongoServerError: E11000 duplicate key error collection: ecommerce.users index: email_1 dup key: { email: \"joao@example.com\" }\n    at InsertOneOperation.execute (C:\\Users\\Phsol\\OneDrive\\área de trabalho\\Back\\E-commerce-Back-End\\node_modules\\mongodb\\lib\\operations\\insert.js:51:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async tryOperation (C:\\Users\\Phsol\\OneDrive\\área de trabalho\\Back\\E-commerce-Back-End\\node_modules\\mongodb\\lib\\operations\\execute_operation.js:207:20)\n    at async executeOperation (C:\\Users\\Phsol\\OneDrive\\área de trabalho\\Back\\E-commerce-Back-End\\node_modules\\mongodb\\lib\\operations\\execute_operation.js:75:16)\n    at async Collection.insertOne (C:\\Users\\Phsol\\OneDrive\\área de trabalho\\Back\\E-commerce-Back-End\\node_modules\\mongodb\\lib\\collection.js:157:16)","timestamp":"2025-09-19T14:28:10.375Z"}
{"level":"error","message":"Erro ao registrar usuário: E11000 duplicate key error collection: ecommerce.users index: email_1 dup key: { email: \"joao@example.com\" }","payload":{"email":"joao@example.com","name":"João da Silva","password":"minhasenha123"},"stack":"MongoServerError: E11000 duplicate key error collection: ecommerce.users index: email_1 dup key: { email: \"joao@example.com\" }\n    at InsertOneOperation.execute (C:\\Users\\Phsol\\OneDrive\\área de trabalho\\Back\\E-commerce-Back-End\\node_modules\\mongodb\\lib\\operations\\insert.js:51:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async tryOperation (C:\\Users\\Phsol\\OneDrive\\área de trabalho\\Back\\E-commerce-Back-End\\node_modules\\mongodb\\lib\\operations\\execute_operation.js:207:20)\n    at async executeOperation (C:\\Users\\Phsol\\OneDrive\\área de trabalho\\Back\\E-commerce-Back-End\\node_modules\\mongodb\\lib\\operations\\execute_operation.js:75:16)\n    at async Collection.insertOne (C:\\Users\\Phsol\\OneDrive\\área de trabalho\\Back\\E-commerce-Back-End\\node_modules\\mongodb\\lib\\collection.js:157:16)","timestamp":"2025-09-19T14:33:44.140Z"}
{"level":"error","message":"Erro ao criar pedido: Cast to ObjectId failed for value \"ID_DO_PRODUTO\" (type string) at path \"_id\" for model \"Product\"","payload":{"products":[{"product":"ID_DO_PRODUTO","quantity":2}],"shippingAddress":{"city":"São Paulo","country":"Brasil","state":"SP","street":"Rua Exemplo, 123","zipCode":"01000-000"}},"stack":"CastError: Cast to ObjectId failed for value \"ID_DO_PRODUTO\" (type string) at path \"_id\" for model \"Product\"\n    at SchemaObjectId.cast (C:\\Users\\Phsol\\OneDrive\\área de trabalho\\Back\\E-commerce-Back-End\\node_modules\\mongoose\\lib\\schema\\objectId.js:251:11)\n    at SchemaType.applySetters (C:\\Users\\Phsol\\OneDrive\\área de trabalho\\Back\\E-commerce-Back-End\\node_modules\\mongoose\\lib\\schemaType.js:1258:12)\n    at SchemaType.castForQuery (C:\\Users\\Phsol\\OneDrive\\área de trabalho\\Back\\E-commerce-Back-End\\node_modules\\mongoose\\lib\\schemaType.js:1694:17)\n    at cast (C:\\Users\\Phsol\\OneDrive\\área de trabalho\\Back\\E-commerce-Back-End\\node_modules\\mongoose\\lib\\cast.js:390:32)\n    at Query.cast (C:\\Users\\Phsol\\OneDrive\\área de trabalho\\Back\\E-commerce-Back-End\\node_modules\\mongoose\\lib\\query.js:5060:12)\n    at Query._castConditions (C:\\Users\\Phsol\\OneDrive\\área de trabalho\\Back\\E-commerce-Back-End\\node_modules\\mongoose\\lib\\query.js:2374:10)\n    at model.Query._findOne (C:\\Users\\Phsol\\OneDrive\\área de trabalho\\Back\\E-commerce-Back-End\\node_modules\\mongoose\\lib\\query.js:2697:8)\n    at model.Query.exec (C:\\Users\\Phsol\\OneDrive\\área de trabalho\\Back\\E-commerce-Back-End\\node_modules\\mongoose\\lib\\query.js:4627:80)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async exports.createOrder (C:\\Users\\Phsol\\OneDrive\\área de trabalho\\Back\\E-commerce-Back-End\\src\\controllers\\orderController.js:18:29)","timestamp":"2025-09-19T14:37:12.147Z","userId":"68cd662da6be3623452f3883"}
{"level":"error","message":"Erro não tratado: Expected property name or '}' in JSON at position 1 (line 1 column 2)","method":"POST","path":"/api/orders","stack":"SyntaxError: Expected property name or '}' in JSON at position 1 (line 1 column 2)\n    at JSON.parse (<anonymous>)\n    at parse (C:\\Users\\Phsol\\OneDrive\\área de trabalho\\Back\\E-commerce-Back-End\\node_modules\\body-parser\\lib\\types\\json.js:77:19)\n    at C:\\Users\\Phsol\\OneDrive\\área de trabalho\\Back\\E-commerce-Back-End\\node_modules\\body-parser\\lib\\read.js:123:18\n    at AsyncResource.runInAsyncScope (node:async_hooks:214:14)\n    at invokeCallback (C:\\Users\\Phsol\\OneDrive\\área de trabalho\\Back\\E-commerce-Back-End\\node_modules\\raw-body\\index.js:238:16)\n    at done (C:\\Users\\Phsol\\OneDrive\\área de trabalho\\Back\\E-commerce-Back-End\\node_modules\\raw-body\\index.js:227:7)\n    at IncomingMessage.onEnd (C:\\Users\\Phsol\\OneDrive\\área de trabalho\\Back\\E-commerce-Back-End\\node_modules\\raw-body\\index.js:287:7)\n    at IncomingMessage.emit (node:events:519:28)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)","timestamp":"2025-09-19T14:47:26.539Z"}
{"level":"error","message":"Erro ao criar produto: Product validation failed: category: Path `category` is required.","payload":{"description":"Notebook potente para jogos","name":"Notebook Gamer","price":4500,"stock":10},"stack":"ValidationError: Product validation failed: category: Path `category` is required.\n    at Document.invalidate (C:\\Users\\Phsol\\OneDrive\\área de trabalho\\Back\\E-commerce-Back-End\\node_modules\\mongoose\\lib\\document.js:3358:32)\n    at C:\\Users\\Phsol\\OneDrive\\área de trabalho\\Back\\E-commerce-Back-End\\node_modules\\mongoose\\lib\\document.js:3119:17\n    at C:\\Users\\Phsol\\OneDrive\\área de trabalho\\Back\\E-commerce-Back-End\\node_modules\\mongoose\\lib\\schemaType.js:1416:9\n    at process.processTicksAndRejections (node:internal/process/task_queues:85:11)","timestamp":"2025-09-19T14:55:52.049Z"}
{"level":"error","message":"Erro ao criar produto: Product validation failed: category: Path `category` is required.","payload":{"description":"Mouse potente para jogos","name":"Mouse Gamer","price":350,"stock":6},"stack":"ValidationError: Product validation failed: category: Path `category` is required.\n    at Document.invalidate (C:\\Users\\Phsol\\OneDrive\\área de trabalho\\Back\\E-commerce-Back-End\\node_modules\\mongoose\\lib\\document.js:3358:32)\n    at C:\\Users\\Phsol\\OneDrive\\área de trabalho\\Back\\E-commerce-Back-End\\node_modules\\mongoose\\lib\\document.js:3119:17\n    at C:\\Users\\Phsol\\OneDrive\\área de trabalho\\Back\\E-commerce-Back-End\\node_modules\\mongoose\\lib\\schemaType.js:1416:9\n    at process.processTicksAndRejections (node:internal/process/task_queues:85:11)","timestamp":"2025-09-19T14:55:52.065Z"}
{"level":"error","message":"Erro ao criar produto: Product validation failed: category: Path `category` is required., price: Path `price` is required., description: Path `description` is required., name: Path `name` is required.","stack":"ValidationError: Product validation failed: category: Path `category` is required., price: Path `price` is required., description: Path `description` is required., name: Path `name` is required.\n    at Document.invalidate (C:\\Users\\Phsol\\OneDrive\\área de trabalho\\Back\\E-commerce-Back-End\\node_modules\\mongoose\\lib\\document.js:3358:32)\n    at C:\\Users\\Phsol\\OneDrive\\área de trabalho\\Back\\E-commerce-Back-End\\node_modules\\mongoose\\lib\\document.js:3119:17\n    at C:\\Users\\Phsol\\OneDrive\\área de trabalho\\Back\\E-commerce-Back-End\\node_modules\\mongoose\\lib\\schemaType.js:1416:9\n    at process.processTicksAndRejections (node:internal/process/task_queues:85:11)","timestamp":"2025-09-19T14:56:33.950Z"}
{"level":"error","message":"Erro ao criar pedido: order.populate(...).populate is not a function","payload":{"products":[{"product":"68cd6f333d097b0305d362ea","quantity":1},{"product":"68cd6f3b3d097b0305d362ec","quantity":2}],"shippingAddress":{"city":"São Paulo","country":"Brasil","state":"SP","street":"Rua Exemplo, 123","zipCode":"01000-000"}},"stack":"TypeError: order.populate(...).populate is not a function\n    at exports.createOrder (C:\\Users\\Phsol\\OneDrive\\área de trabalho\\Back\\E-commerce-Back-End\\src\\controllers\\orderController.js:47:50)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-09-19T15:00:43.724Z","userId":"68cd662da6be3623452f3883"}
{"level":"error","message":"Erro ao criar pedido: order.populate(...).populate is not a function","payload":{"products":[{"product":"68cd6f333d097b0305d362ea","quantity":1},{"product":"68cd6f3b3d097b0305d362ec","quantity":2}],"shippingAddress":{"city":"São Paulo","country":"Brasil","state":"SP","street":"Rua Exemplo, 123","zipCode":"01000-000"}},"stack":"TypeError: order.populate(...).populate is not a function\n    at exports.createOrder (C:\\Users\\Phsol\\OneDrive\\área de trabalho\\Back\\E-commerce-Back-End\\src\\controllers\\orderController.js:47:50)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-09-19T15:04:09.165Z","userId":"68cd662da6be3623452f3883"}
{"level":"error","message":"Erro ao criar pedido: order.populate(...).populate is not a function","payload":{"products":[{"product":"68cd6f333d097b0305d362ea","quantity":1},{"product":"68cd6f3b3d097b0305d362ec","quantity":2}],"shippingAddress":{"city":"São Paulo","country":"Brasil","state":"SP","street":"Rua Exemplo, 123","zipCode":"01000-000"}},"stack":"TypeError: order.populate(...).populate is not a function\n    at exports.createOrder (C:\\Users\\Phsol\\OneDrive\\área de trabalho\\Back\\E-commerce-Back-End\\src\\controllers\\orderController.js:47:50)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-09-19T15:06:04.271Z","userId":"68cd662da6be3623452f3883"}
{"level":"error","message":"Erro ao registrar usuário: User validation failed: password: Path `password` (`123456`, length 6) is shorter than the minimum allowed length (7).","payload":{"email":"pedro@exemplo.com","name":"Pedro","password":"123456"},"stack":"ValidationError: User validation failed: password: Path `password` (`123456`, length 6) is shorter than the minimum allowed length (7).\n    at Document.invalidate (C:\\Users\\Phsol\\OneDrive\\área de trabalho\\Back\\E-commerce-Back-End\\node_modules\\mongoose\\lib\\document.js:3358:32)\n    at C:\\Users\\Phsol\\OneDrive\\área de trabalho\\Back\\E-commerce-Back-End\\node_modules\\mongoose\\lib\\document.js:3119:17\n    at C:\\Users\\Phsol\\OneDrive\\área de trabalho\\Back\\E-commerce-Back-End\\node_modules\\mongoose\\lib\\schemaType.js:1416:9\n    at process.processTicksAndRejections (node:internal/process/task_queues:85:11)","timestamp":"2025-09-19T15:14:24.263Z"}
{"level":"error","message":"Erro ao registrar usuário: E11000 duplicate key error collection: ecommerce.users index: email_1 dup key: { email: \"pedro@exemplo.com\" }","payload":{"email":"pedro@exemplo.com","name":"Pedro","password":"1234567"},"stack":"MongoServerError: E11000 duplicate key error collection: ecommerce.users index: email_1 dup key: { email: \"pedro@exemplo.com\" }\n    at InsertOneOperation.execute (C:\\Users\\Phsol\\OneDrive\\área de trabalho\\Back\\E-commerce-Back-End\\node_modules\\mongodb\\lib\\operations\\insert.js:51:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async tryOperation (C:\\Users\\Phsol\\OneDrive\\área de trabalho\\Back\\E-commerce-Back-End\\node_modules\\mongodb\\lib\\operations\\execute_operation.js:207:20)\n    at async executeOperation (C:\\Users\\Phsol\\OneDrive\\área de trabalho\\Back\\E-commerce-Back-End\\node_modules\\mongodb\\lib\\operations\\execute_operation.js:75:16)\n    at async Collection.insertOne (C:\\Users\\Phsol\\OneDrive\\área de trabalho\\Back\\E-commerce-Back-End\\node_modules\\mongodb\\lib\\collection.js:157:16)","timestamp":"2025-09-19T20:49:36.648Z"}
{"level":"error","message":"Erro ao criar pedido: orderProducts is not iterable","payload":{"orderItems":[{"product":"68cd6f333d097b0305d362ea","qty":1}]},"stack":"TypeError: orderProducts is not iterable\n    at exports.createOrder (C:\\Users\\Phsol\\OneDrive\\área de trabalho\\Back\\E-commerce-Back-End\\src\\controllers\\orderController.js:17:26)\n    at Layer.handleRequest (C:\\Users\\Phsol\\OneDrive\\área de trabalho\\Back\\E-commerce-Back-End\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (C:\\Users\\Phsol\\OneDrive\\área de trabalho\\Back\\E-commerce-Back-End\\node_modules\\router\\lib\\route.js:157:13)\n    at auth (C:\\Users\\Phsol\\OneDrive\\área de trabalho\\Back\\E-commerce-Back-End\\src\\middleware\\auth.js:19:9)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-09-19T20:52:22.594Z","userId":"68cd7366c39441de4f776c2c"}
{"level":"error","message":"Erro ao criar pedido: orderProducts is not iterable","payload":{"orderItems":[{"product":"68cd6f333d097b0305d362ea","qty":1}]},"stack":"TypeError: orderProducts is not iterable\n    at exports.createOrder (C:\\Users\\Phsol\\OneDrive\\área de trabalho\\Back\\E-commerce-Back-End\\src\\controllers\\orderController.js:17:26)\n    at Layer.handleRequest (C:\\Users\\Phsol\\OneDrive\\área de trabalho\\Back\\E-commerce-Back-End\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (C:\\Users\\Phsol\\OneDrive\\área de trabalho\\Back\\E-commerce-Back-End\\node_modules\\router\\lib\\route.js:157:13)\n    at auth (C:\\Users\\Phsol\\OneDrive\\área de trabalho\\Back\\E-commerce-Back-End\\src\\middleware\\auth.js:19:9)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-09-19T20:53:34.601Z","userId":"68cd7366c39441de4f776c2c"}
{"level":"error","message":"Erro ao criar pedido: orderProducts is not iterable","payload":{"orderProducts":[{"product":"68cd6f333d097b0305d362ea","qty":1}]},"stack":"TypeError: orderProducts is not iterable\n    at exports.createOrder (C:\\Users\\Phsol\\OneDrive\\área de trabalho\\Back\\E-commerce-Back-End\\src\\controllers\\orderController.js:17:26)\n    at Layer.handleRequest (C:\\Users\\Phsol\\OneDrive\\área de trabalho\\Back\\E-commerce-Back-End\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (C:\\Users\\Phsol\\OneDrive\\área de trabalho\\Back\\E-commerce-Back-End\\node_modules\\router\\lib\\route.js:157:13)\n    at auth (C:\\Users\\Phsol\\OneDrive\\área de trabalho\\Back\\E-commerce-Back-End\\src\\middleware\\auth.js:19:9)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-09-19T20:54:49.345Z","userId":"68cd7366c39441de4f776c2c"}
{"level":"error","message":"Erro ao criar pedido: orderProducts is not iterable","payload":{"orderProducts":[{"product":"68cd6f333d097b0305d362ea","qty":1}]},"stack":"TypeError: orderProducts is not iterable\n    at exports.createOrder (C:\\Users\\Phsol\\OneDrive\\área de trabalho\\Back\\E-commerce-Back-End\\src\\controllers\\orderController.js:17:26)\n    at Layer.handleRequest (C:\\Users\\Phsol\\OneDrive\\área de trabalho\\Back\\E-commerce-Back-End\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (C:\\Users\\Phsol\\OneDrive\\área de trabalho\\Back\\E-commerce-Back-End\\node_modules\\router\\lib\\route.js:157:13)\n    at auth (C:\\Users\\Phsol\\OneDrive\\área de trabalho\\Back\\E-commerce-Back-End\\src\\middleware\\auth.js:19:9)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-09-19T20:54:51.611Z","userId":"68cd7366c39441de4f776c2c"}
{"level":"error","message":"Erro ao criar pedido: orderProducts is not iterable","payload":{"orderItems":[{"product":"68cd6f333d097b0305d362ea","qty":1}]},"stack":"TypeError: orderProducts is not iterable\n    at exports.createOrder (C:\\Users\\Phsol\\OneDrive\\área de trabalho\\Back\\E-commerce-Back-End\\src\\controllers\\orderController.js:17:26)\n    at Layer.handleRequest (C:\\Users\\Phsol\\OneDrive\\área de trabalho\\Back\\E-commerce-Back-End\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (C:\\Users\\Phsol\\OneDrive\\área de trabalho\\Back\\E-commerce-Back-End\\node_modules\\router\\lib\\route.js:157:13)\n    at auth (C:\\Users\\Phsol\\OneDrive\\área de trabalho\\Back\\E-commerce-Back-End\\src\\middleware\\auth.js:19:9)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-09-19T20:58:59.173Z","userId":"68cd7366c39441de4f776c2c"}
{"level":"error","message":"Erro ao criar pedido: orderProducts is not iterable","payload":{"orderProducts":[{"product":"68cd6f333d097b0305d362ea","qty":1}]},"stack":"TypeError: orderProducts is not iterable\n    at exports.createOrder (C:\\Users\\Phsol\\OneDrive\\área de trabalho\\Back\\E-commerce-Back-End\\src\\controllers\\orderController.js:17:26)\n    at Layer.handleRequest (C:\\Users\\Phsol\\OneDrive\\área de trabalho\\Back\\E-commerce-Back-End\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (C:\\Users\\Phsol\\OneDrive\\área de trabalho\\Back\\E-commerce-Back-End\\node_modules\\router\\lib\\route.js:157:13)\n    at auth (C:\\Users\\Phsol\\OneDrive\\área de trabalho\\Back\\E-commerce-Back-End\\src\\middleware\\auth.js:19:9)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-09-19T20:59:25.274Z","userId":"68cd7366c39441de4f776c2c"}
